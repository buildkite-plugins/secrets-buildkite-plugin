#!/bin/bash
set -euo pipefail

# Load plugin library
# shellcheck source=lib/plugin.bash
source "$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)/../lib/plugin.bash"

main() {
  echo "--- :closed_lock_with_key: Setting up secrets environment"
  
  log_info "Provider - ${BUILDKITE_PLUGIN_SECRETS_PROVIDER}"

  # Setup provider environment
  setup_provider_environment

  # Fetch secrets from the configured provider
  fetch_secrets
}

main "$@"
